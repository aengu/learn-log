<div class="log-card card bg-base-100 shadow-xl cursor-pointer hover:shadow-2xl transition-shadow"
     data-log-id="{{ log.id }}"
     onclick="openLogDetail({{ log.id }})">
    <div class="card-body">
        <div class="flex justify-between items-start">
            <h2 class="card-title text-base line-clamp-2 flex-1">{{ log.query }}</h2>
            <span class="cursor-pointer text-lg ml-2 {% if log.is_bookmarked %}text-warning{% else %}text-base-content/20{% endif %}"
                  data-bookmark-id="{{ log.id }}"
                  onclick="event.stopPropagation(); toggleBookmark({{ log.id }})">★</span>
        </div>
        <p class="text-sm text-base-content/60 line-clamp-2">
            {{ log.ai_response|truncatechars:100 }}
        </p>
        
        {% if log.tags.exists %}
        <div class="flex flex-wrap gap-1 mt-2">
            {% for tag in log.tags.all|slice:":3" %}
            <span class="badge badge-sm cursor-pointer {% if tag.slug in active_tags %}badge-primary{% else %}badge-outline{% endif %}"
                  onclick="event.stopPropagation(); toggleTag('{{ tag.slug }}')">{{ tag.name }}</span>
            {% endfor %}
            {% if log.tags.count > 3 %}
            <span class="badge badge-sm badge-ghost">+{{ log.tags.count|add:"-3" }}</span>
            {% endif %}
        </div>
        {% endif %}
        
        <div class="card-actions justify-between items-center mt-2">
            <span class="text-xs text-base-content/40">조회수: {{ log.view_count }}</span>
            <span class="text-xs text-base-content/40">{{ log.created_at|date:"n/j" }}</span>
        </div>        
    </div>
</div>
